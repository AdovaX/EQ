<app-menubar></app-menubar>
 <div class="content-wrapper">
    <div class="container-fluid">
 
        <div class="row pt-2 pb-2">
            <div class="col-sm-9">
                <h4 class="page-title">Chat history </h4> 
           </div> 
         </div>   

 
                <div class="row" [hidden]="nomsgs">  
                    <div class="col-sm-4"> 
                        <div class="card  bg-white">
          
                            <div class="card-body cuspadding">
                                <div class="chatheads">
                                    <div *ngFor="let item of msgs"> 
                                    <div class="media align-items-center" (click)="getSingleChat(item.User_id)">
                                    <img src="{{item.Profile_photo}}" class="rounded customer-img" alt="user avatar">
                                    <div class="media-body ml-3">
                                    <h6 class="mb-0 ">{{item.RequirementsTb.Requirement_name}}</h6>
                                    <p class="mb-0 ">{{item.CompanyTb.C_short_name}}</p>
                                    <p *ngIf="newMsg">New msgs</p>
                                    </div>
                                    <button mat-icon-button class="btn btn-sm btn-round btn-white" (click)="getSingleChat(item.User_id)" >
                                    <span class="fa fa-comments-o fa-2x"></span>
                                    </button> 
                                    </div>
                                    <hr class="">  
                                    </div> 
                            </div> 
                 
                            </div>
                         </div>   
                    </div> 
                    <div class="col-sm-8"> 
                        <div class="card  bg-white"  style="background-image: url('https://backgroundcheckall.com/wp-content/uploads/2017/12/whatsapp-chat-background.jpg');"> 
                        <div class="card-body cuspadding"> 
                        <div class="chatsection" #scrollMe>
                        <div class="bgimg" >
                         
                        <div *ngIf="clickHistory != true"> 
                            <section class="chat"> 
                                <div class="messages-chat" >
        

                          <div *ngFor="let msg of history">
                            <div *ngIf="msg.Sender_id == User_id">
                           <div class="message" >
                            <div class="photo" style="background-image: url('{{msg.UsersTb.Profile_photo}}');">
                              <div class="online"></div>
                            </div>
                            <p class="text"> {{msg.Message}} </p>
                          </div>  
                          <p class="time"> {{msg.createdAt |   date:'medium'}}</p> 
                        </div> 
                        <div *ngIf="msg.Reciver_id == User_id"> 
                          <div class="message text-only">
                            <div class="response">
                              <p class="text"> {{msg.Message}}</p>
                            </div>
                            <div class="photo" style="background-image: url('{{msg.UsersTb.Profile_photo}}');">
                                <div class="online"></div>
                              </div>
                          </div>  
                          <p class="response-time time"> {{msg.createdAt |   date:'medium'}}</p> 
                          </div>

                        </div> 
                        </div>
                        </section>
                    </div> 
                        </div>
                        </div>
                        <div class="sendsec" *ngIf="clickHistory != true">
                            <div class="row">
                               <div class="col-sm-12"> 
                                    <mat-form-field appearance="outline" class="widthfull">
                                        <mat-label>Type your message here...</mat-label>
                                        <textarea matInput   autocomplete="off" (keyup)="inputmsgs($event)" #msg></textarea>
                                        <button mat-mini-fab color="primary" matSuffix  class="topup" (click)="sendMessage()"> <span class="fa fa-send"></span> </button>
                                      
                                      </mat-form-field> 
                               </div>
                            </div> 
                
                        </div> 
                        </div>
                        </div> 
                    </div>

                </div>  




        <div class="overlay toggle-menu"></div> 
        </div>
        </div> 
<app-footer></app-footer>